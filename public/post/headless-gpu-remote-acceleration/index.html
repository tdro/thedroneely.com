
<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en-us">
<head>
  <title>
    GPU Accel on Remote Desktop - Thedro Neely
  </title>



<?php require $_SERVER['DOCUMENT_ROOT'] . '/..' . '/app/views/partials/header.posts.php'; ?>
</head>

<body>


<?php require $_SERVER['DOCUMENT_ROOT'] . '/..' . '/app/views/partials/navigator.php'; ?>
<section class="section is-fullheight" itemscope itemtype="http://schema.org/WebPage">
	<div class="container">
		<div class="columns">
			<div class="column is-8 is-offset-2">
				<article class="content">
					<h1 class="title is-3c">GPU Accel on Remote Desktop</h1>

					<p class="subtitle line__height is-6 has-text-grey-dark">Posted 
<time datetime="2018-02-11">11 February 2018</time>; tagged with 
<a class="underline" href="/tags/headless/">headless</a>,
<a class="underline" href="/tags/linux/">linux</a>,
<a class="underline" href="/tags/server/">server</a>
<br>
            <a href="#isso-thread">Comments</a>
          </p>
<p class="paragraph__serif">Sometimes the solution to some problems are strange. Imagine a headless, remote, linux based desktop setup where users can remote into a graphical
environment. The remote desktop works great with the integrated graphics card but once it switches to discrete graphics it comes to screeching halt.
No graphical acceleration.</p>

<p class="paragraph__serif">Many graphic cards now enter a low power state if you do not connect a monitor. This is good for users who care about power efficiency but a pain for
those who implement headless configurations. The common solution to this problem is to buy a &ldquo;Dummy Plug&rdquo; for your HDMI or Display Port to fake
a head onto your headless configuration. It does work.</p>

<p class="paragraph__serif">I stumbled upon another way of doing this without having to use a dummy plug. It turns out that we can tell the system to pretend that we have a display connected by using
<code>xrandr</code>. First we tell the system to add new resolution modes like so;</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">xrandr --newmode <span class="s2">&#34;1366x768p&#34;</span> <span class="m">72</span>.00 <span class="m">1366</span> <span class="m">1414</span> <span class="m">1446</span> <span class="m">1494</span> <span class="m">768</span> <span class="m">771</span> <span class="m">777</span> <span class="m">803</span><span class="p">;</span>
xrandr --newmode <span class="s2">&#34;1280x800p&#34;</span> <span class="m">24</span>.15 <span class="m">1280</span> <span class="m">1312</span> <span class="m">1400</span> <span class="m">1432</span> <span class="m">800</span> <span class="m">819</span> <span class="m">822</span> <span class="m">841</span><span class="p">;</span>
xrandr --newmode <span class="s2">&#34;1024x768p&#34;</span> <span class="m">18</span>.71 <span class="m">1024</span> <span class="m">1056</span> <span class="m">1120</span> <span class="m">1152</span> <span class="m">768</span> <span class="m">786</span> <span class="m">789</span> <span class="m">807</span><span class="p">;</span></code></pre></div>

<p class="paragraph__serif">Then assign those modes to a port type on the graphics card like a Display Port;</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">xrandr --addmode DisplayPort-0 <span class="s2">&#34;1366x768p&#34;</span><span class="p">;</span>
xrandr --addmode DisplayPort-0 <span class="s2">&#34;1280x800p&#34;</span><span class="p">;</span>
xrandr --addmode DisplayPort-0 <span class="s2">&#34;1024x768p&#34;</span><span class="p">;</span></code></pre></div>

<p class="paragraph__serif">Finally pick a mode and then force output on the interface as such;</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">xrandr --output DisplayPort-0 --mode <span class="s2">&#34;1366x768p&#34;</span><span class="p">;</span></code></pre></div>

<p class="paragraph__serif">Amazingly enough the discrete graphics card comes to life and we get GPU acceleration on the remote. Maybe this does not work for all cards,
but it has good coverage. For everything else there is always the &ldquo;Dummy Plug&rdquo;.</p>


<link rel="stylesheet" href="/css/monokai-syntax.css">



          <h3 id="comments">Comments</h3>

          </article>

          <link rel="stylesheet" href="/css/isso-tdro.css">

          <script data-isso="/isso/" data-isso-css="false" src="/isso/js/embed.min.js"></script>

          <section id="isso-thread" data-title="GPU Accel on Remote Desktop"></section>

          <noscript>Sadly, you'll have to enable JavaScript to view the comments.</noscript>

			</div>
		</div>
	</div>
</section>
<section>




<?php require $_SERVER['DOCUMENT_ROOT'] . '/..' . '/app/views/partials/footer.php'; ?>





<recent-posts class="is-hidden">
        
        <br>
        <a class="underline__hover line__height" href="/post/website-auditing-tools/">Website Auditing Tools</a>
        
        <br>
        <a class="underline__hover line__height" href="/post/bitcoin-hacked-email-scam/">Bitcoin Hacked Email Scam</a>
        
        <br>
        <a class="underline__hover line__height" href="/post/my-sublime-text-setup/">My Sublime Text Setup</a>
        
</recent-posts>





<recent-projects class="is-hidden">
        
        <br>
        <a class="underline__hover line__height" href="/project/bulma-resume/">Bulma Resume</a>
        
        <br>
        <a class="underline__hover line__height" href="/project/personal-portfolio/">Personal Portfolio</a>
        
        <br>
        <a class="underline__hover line__height" href="/project/voiceover-website/">Voiceover Website</a>
        
</recent-projects>


  </body>
</html>
