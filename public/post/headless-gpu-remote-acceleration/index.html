
<!DOCTYPE html>
<html class="has-navbar-fixed-top" lang="en-us">
<head>
  <title>
    GPU Accel on Remote Desktop - Portfolio - Thedro Neely
  </title>

<?php require $_SERVER['DOCUMENT_ROOT'] . '/..' . '/app/views/partials/header.posts.php'; ?> 
  
</head>

<body>

<?php require $_SERVER['DOCUMENT_ROOT'] . '/..' . '/app/views/partials/navigator.php'; ?><section class="section is-fullheight" itemscope itemtype="http://schema.org/WebPage">
	<div class="container">
		<div class="columns">
			<div class="column is-8 is-offset-2">
				<article class="content">
					<h1 class="title is-3c">GPU Accel on Remote Desktop</h1>
					<p class="subtitle is-6 has-text-grey">
					<em>Posted 
<time datetime="2018-02-11">11 February 2018</time>; tagged with 
<a href="/tags/gpu/">gpu</a>,
<a href="/tags/headless/">headless</a>,
<a href="/tags/server/">server</a>
</em></p>
<p>Sometimes the solution to some problems are strange. Imagine a headless, remote, linux based desktop setup where users can remote into a graphical
environment. The remote desktop works great with the integrated graphics card but once it switches to discrete graphics it comes to screeching halt.
No graphical acceleration.</p>

<p>Many graphic cards now enter a low power state if you do not connect a monitor. This is good for users who care about power efficiency but a pain for
those who implement headless configurations. The common solution to this problem is to buy a &ldquo;Dummy Plug&rdquo; for your HDMI or Display Port to fake
a head onto your headless configuration. It does work.</p>

<p>I stumbled upon another way of doing this without having to use a dummy plug. It turns out that we can tell the system to pretend that we have a display connected by using
<code>xrandr</code>. First we tell the system to add new resolution modes like so;</p>
<div class="highlight"><pre class="chroma">xrandr --newmode &#34;1366x768p&#34; 72.00 1366 1414 1446 1494 768 771 777 803;
xrandr --newmode &#34;1280x800p&#34; 24.15 1280 1312 1400 1432 800 819 822 841;
xrandr --newmode &#34;1024x768p&#34; 18.71 1024 1056 1120 1152 768 786 789 807;</pre></div>
<p>Then assign those modes to a port type on the graphics card like a Display Port;</p>
<div class="highlight"><pre class="chroma">xrandr --addmode DisplayPort-0 &#34;1366x768p&#34;;
xrandr --addmode DisplayPort-0 &#34;1280x800p&#34;;
xrandr --addmode DisplayPort-0 &#34;1024x768p&#34;;</pre></div>
<p>Finally pick a mode and then force output on the interface as such;</p>
<div class="highlight"><pre class="chroma">xrandr --output DisplayPort-0 --mode &#34;1366x768p&#34;;</pre></div>
<p>Amazingly enough the discrete graphics card comes to life and we get GPU acceleration on the remote. Maybe this does not work for all cards,
but it has good coverage. For everything else there is always the &ldquo;Dummy Plug&rdquo;.</p>

					

				</article>

        <script data-isso="/isso/" src="/isso/js/embed.min.js"></script>

        <section id="isso-thread"></section>

			</div>
		</div>
	</div>
</section>
<section>


<?php require $_SERVER['DOCUMENT_ROOT'] . '/..' . '/app/views/partials/footer.php'; ?> 
